<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="proyectos_subreport1" language="groovy" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="75b56f1d-dc84-4d95-98ab-333b1e8c9e79">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="proyecto" class="java.lang.String"/>
	<queryString>
		<![CDATA[select
a.fecha_ingreso, a.proyecto, b.codigo, max(b.descripcion) descripcion, - sum(cantidad) cantidad, - sum(b.precio*b.cantidad) total
from entrada a
inner join entrada_detalle b on b.codigo_interno = a.codigo_interno
where a.proyecto = $P{proyecto}
group by a.proyecto, a.fecha_ingreso, b.codigo]]>
	</queryString>
	<field name="fecha_ingreso" class="java.sql.Date"/>
	<field name="proyecto" class="java.lang.String"/>
	<field name="codigo" class="java.lang.String"/>
	<field name="descripcion" class="java.lang.String"/>
	<field name="cantidad" class="java.lang.Long"/>
	<field name="total" class="java.lang.Long"/>
	<variable name="total_1" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA[$F{total}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="16" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="0" y="1" width="356" height="14" backcolor="#CCCCCC" uuid="451ef1b2-9950-4764-8aa4-93f4be812739"/>
				<textElement>
					<font size="8" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Devoluciones]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="0" width="358" height="1" uuid="b32ee978-8532-464a-96b9-792eb4cf60b5"/>
			</line>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="17" splitType="Stretch">
			<staticText>
				<reportElement x="10" y="2" width="45" height="14" uuid="01c76b21-5413-4524-b5ec-b95e3c7e2137"/>
				<textElement>
					<font size="6" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Fecha ingreso]]></text>
			</staticText>
			<staticText>
				<reportElement x="59" y="2" width="58" height="14" uuid="e8c062f0-62fa-4150-ac8a-2369662474d4"/>
				<textElement>
					<font size="6" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Codigo]]></text>
			</staticText>
			<staticText>
				<reportElement x="120" y="2" width="114" height="14" uuid="29371ba1-ad2e-4431-896e-2ab9d80e95d0"/>
				<textElement>
					<font size="6" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Descripcion]]></text>
			</staticText>
			<staticText>
				<reportElement x="237" y="2" width="45" height="14" uuid="54fe21f7-7309-46ca-b505-7ff2d6605f83"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Cantidad]]></text>
			</staticText>
			<staticText>
				<reportElement x="286" y="2" width="70" height="14" uuid="51fb320d-f966-4d5a-8692-081a0d75f9a4"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="0" width="358" height="1" uuid="d19ef478-f774-4624-8b1a-0dd2d440db89"/>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField pattern="dd/MM/yyyy">
				<reportElement x="10" y="2" width="45" height="17" uuid="25bf1aa0-916e-4ffd-8e12-1815f7f59677"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_ingreso}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="59" y="2" width="58" height="17" uuid="a808fe01-71c7-4b83-9a3c-71dddf0eaa23"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{codigo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="120" y="2" width="114" height="17" uuid="05530804-e58b-4af0-b881-8aa42c57bd8b"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0;-#,##0">
				<reportElement x="237" y="2" width="45" height="17" uuid="6b4e817d-791e-4ad3-a017-34b7c1ea3b90"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0;-#,##0">
				<reportElement x="286" y="2" width="70" height="17" uuid="50dc03e6-7c81-4805-8cbd-4bfc87b85300"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="4" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="5" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="20" splitType="Stretch">
			<textField pattern="#,##0;-#,##0">
				<reportElement x="258" y="3" width="100" height="13" uuid="b10b966a-6c76-4629-b7c9-8f080c76a147"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{total_1}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="257" y="2" width="100" height="1" uuid="d989ac4f-b4a6-436c-bfea-3d7efc25e67f"/>
			</line>
		</band>
	</summary>
</jasperReport>
